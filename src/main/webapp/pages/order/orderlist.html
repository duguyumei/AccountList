<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">

<head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8" />

  <script src="../../scripts/boot.js" type="text/javascript"></script>


</head>

<body>
  <style type="text/css">
    html,
    body {
      margin: 0;
      padding: 0;
      border: 0;
      width: 100%;
      height: 100%;
      overflow: hidden;
    }
  </style>
  <div class="mini-toolbar" style="padding:2px;border-bottom:0;">
    <table style="width:100%;">
      <tr>
        <td style="width:100%;">
          <a class="mini-button" iconCls="icon-add" onclick="addOrder()">新增</a>
        </td>
      </tr>
    </table>
  </div>
  <!--撑满页面-->
  <div class="mini-fit">

    <div id="orderlist" class="mini-datagrid" style="width:100%;height:100%;" url="../../orderlistaction" idField="id"
      sizeList="[5,10,20,50]" pageSize="10">
      <div property="columns">
        <div type="indexcolumn" align="center" headerAlign="center">序</div>
        <div field="orderGuid" width="120" align="center" headerAlign="center" allowSort="true">订单编号</div>
        <div field="dishName" width="120" align="center" headerAlign="center">菜品名称</div>
        <div field="people" width="100" align="center" headerAlign="center">订餐人</div>
        <div field="orderTime" width="100" align="center" headerAlign="center" allowSort="true" dateFormat="yyyy-MM-dd : HH:mm:ss">
          订餐时间</div>
        <div field="phone" width="100" headerAlign="center" align="center">联系电话</div>
        <div field="orderNumber" width="100" headerAlign="center" align="center">份数</div>
        <div field="address" width="100" headerAlign="center" align="center">送餐地址</div>
        <div field="sumMoney" width="100" headerAlign="center" align="center">总价</div>
        <div name="action" width="120" headerAlign="center" align="center" renderer="onActionRenderer"
          cellStyle="padding:0;">操作</div>
      </div>
    </div>

  </div>

  <script type="text/javascript">
    mini.parse();
    var grid = mini.get("orderlist");
    grid.load();

    //操作按钮
    function onActionRenderer(e) {
      var s = ' <a class="mini-button" onclick="showDish(\'' + e.record.dishGuid + '\')">详情</a>';
      return s;
    }
    //新增订单
    function addOrder() {
      mini.open({
        url: "pages/order/orderAdd.html",
        title: "新增订餐信息", width: 600, height: 400,
        ondestroy: function (action) {
          grid.reload();
        }
      });
    }
  </script>

</body>

</html>